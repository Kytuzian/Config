#!/usr/bin/python

import shlex
import sys
import subprocess

com = shlex.split(sys.argv[1])
for line in sys.stdin:
    args = shlex.split(line)

    # print(com + args)
    p = subprocess.Popen(com + args, stdout=subprocess.PIPE)

    try:
        while p.poll() is None:
            l = p.stdout.readline()
            sys.stdout.write(l)
            sys.stdout.flush()

        sys.stdout.write(p.stdout.read())
        sys.stdout.flush()
    except KeyboardInterrupt:
        p.kill()

