#!/usr/bin/python

import shlex
import sys
import subprocess

com = shlex.split(sys.argv[1])
for line in sys.stdin:
    args = shlex.split(line)
    p = subprocess.Popen(com + args, stdout=subprocess.PIPE)

    try:
        while p.poll() is None:
            l = p.stdout.readline()
            print(l)

        print(p.stdout.read())
        p.kill()
    except KeyboardInterrupt:
        p.kill()

